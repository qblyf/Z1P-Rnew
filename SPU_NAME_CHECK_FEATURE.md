# SPU 命名规范检查功能

## 功能概述

SPU 命名规范检查功能用于检查现有 SPU 的命名是否符合项目规范，并将不符合规范的 SPU 标记出来，方便运维人员进行修正。

## 访问路径

- 菜单路径：商品管理 → SPU 命名规范检查
- URL：`/spu-name-check`

## 命名规范

根据项目 README.md 中定义的数据运维规范，SPU 命名应遵循以下规则：

1. **品牌名 + 空格 + 官方名称**
   - SPU 名称使用 品牌名 + 官方名称，之间留空格
   - 示例：`Apple iPhone 13 Pro` ✅
   - 错误：`AppleiPhone 13 Pro` ❌

2. **使用官方名称大小写**
   - 使用官方的品牌和产品名称大小写
   - 示例：`iPhone` ✅，`iphone` ❌
   - 示例：`HUAWEI` ✅，`huawei` ❌

3. **不要有错别字**
   - 确保品牌名和产品名拼写正确
   - 示例：`iPhone` ✅，`IPhione` ❌

4. **不要有"全网通"字样**
   - SPU 名称不应包含"全网通"
   - 示例：`Apple iPhone 13` ✅
   - 错误：`Apple iPhone 13 全网通` ❌

## 检查项目

系统会自动检查以下问题：

### 错误级别（Error）

1. **缺少品牌信息**
   - 检测：SPU 的 brand 字段为空
   - 提示：`缺少品牌信息`

2. **品牌名不匹配**
   - 检测：SPU 名称未以品牌名开头
   - 提示：`名称未以品牌"xxx"开头`

3. **品牌后缺少空格**
   - 检测：品牌名后没有空格分隔
   - 提示：`品牌名后缺少空格`

### 警告级别（Warning）

1. **包含"全网通"字样**
   - 检测：名称中包含"全网通"
   - 提示：`名称包含"全网通"字样`

2. **品牌名大小写可能不正确**
   - 检测：常见品牌的大小写与标准不符
   - 提示：`品牌名大小写可能不正确，建议使用"xxx"`
   - 支持的品牌：iPhone, iPad, MacBook, HUAWEI, Xiaomi, OPPO, vivo, Samsung

## 使用方法

### 1. 筛选条件

- **SPU 分类**：可选择特定分类进行检查
- **品牌**：可选择特定品牌进行检查
- **状态**：选择检查有效或无效的 SPU（默认：有效）

### 2. 开始检查

点击"开始检查"按钮，系统会：
1. 获取符合筛选条件的所有 SPU（最多 10000 条）
2. 对每个 SPU 进行命名规范检查
3. 显示检查结果统计和详细列表

### 3. 查看结果

检查完成后会显示：

- **统计信息**
  - 总计：检查的 SPU 总数
  - 错误：有错误级别问题的 SPU 数量
  - 警告：仅有警告级别问题的 SPU 数量
  - 正常：完全符合规范的 SPU 数量

- **问题列表**
  - 仅显示有问题的 SPU
  - 每个 SPU 显示：ID、名称、品牌、问题标签
  - 问题标签用颜色区分：红色（错误）、橙色（警告）

### 4. 修正问题

点击"编辑"按钮可以跳转到商品管理页面，直接编辑对应的 SPU。

## 技术实现

### 文件位置

- 页面组件：`Z1P-Rnew/app/spu-name-check/page.tsx`
- 导航配置：`Z1P-Rnew/constant/navigation.ts`

### 核心函数

```typescript
function checkSPUNaming(
  spu: Pick<SPU, 'name' | 'brand'>, 
  brandList: string[]
): NamingIssue[]
```

该函数接收 SPU 的名称和品牌信息，返回所有检测到的问题列表。

### 数据结构

```typescript
interface NamingIssue {
  type: 'no_space' | 'has_quanwangtong' | 'no_brand' | 'brand_mismatch' | 'lowercase_brand';
  message: string;
  severity: 'error' | 'warning';
}
```

## 权限要求

需要 `product-manage` 权限才能访问此功能。

## 注意事项

1. 一次最多检查 10000 条 SPU 记录
2. 如果 SPU 数量较多，建议分批次按分类或品牌进行检查
3. 检查结果仅显示有问题的 SPU，正常的 SPU 不会在列表中显示
4. 品牌大小写检查仅针对常见品牌，其他品牌需要人工判断

## 后续优化建议

1. 增加更多常见品牌的大小写规则
2. 支持自定义命名规则配置
3. 支持批量修正功能
4. 增加错别字检测（基于拼音或编辑距离）
5. 支持导出检查报告
6. 增加历史检查记录
